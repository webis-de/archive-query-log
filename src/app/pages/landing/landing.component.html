<div class="min-h-full flex flex-col items-center pt-32 relative">
  <div class="w-full max-w-3xl px-4 text-center">
    <img src="assets/img/logo/aql-logo.svg" alt="AQL Logo" class="h-24 w-auto mx-auto mb-2" />
    <h1 class="text-5xl font-bold mb-8 text-primary">{{ 'app.title' | translate }}</h1>
    <div class="flex items-center w-full gap-2">
      <aql-dropdown
        class="flex-1 search-container"
        [open]="showSuggestions() && suggestions().length > 0 && searchQuery().trim().length > 0"
        [matchTriggerWidth]="true"
        position="bottom"
      >
        <aql-input-field
          trigger
          class="w-full h-full"
          shape="square"
          [placeholder]="'landing.searchPlaceholder' | translate"
          type="text"
          size="lg"
          color="primary"
          [ngModel]="searchQuery()"
          (ngModelChange)="onSearchInput($event)"
          [label]="landingMessage()"
          (keydown.enter)="onSearch(); showSuggestions.set(false)"
          (click)="onSearchFocus(); $event.stopPropagation()"
        >
          <aql-button
            suffix
            btnType="primary"
            btnStyle="full"
            size="sm"
            (buttonClick)="onSearch(); showSuggestions.set(false); $event.stopPropagation()"
          >
            {{ 'landing.searchButton' | translate }}
          </aql-button>
        </aql-input-field>

        <div content class="suggestions-content max-h-72 overflow-y-auto overflow-x-hidden w-full">
          @for (suggestion of suggestions(); track suggestion.id) {
            <aql-menu-item
              class="w-full max-w-full"
              iconBefore="bi-search"
              (click)="onSuggestionSelect(suggestion)"
            >
              {{ suggestion.query }}
              <span after class="text-sm text-gray-500">
                {{
                  suggestion.score !== null && suggestion.score !== undefined
                    ? (suggestion.score | number)
                    : 'â€”'
                }}
              </span>
            </aql-menu-item>
          }
        </div>
      </aql-dropdown>
      <aql-filter-dropdown (filtersChanged)="onFiltersChanged($event)"></aql-filter-dropdown>
    </div>

    <div class="flex flex-wrap gap-2 mt-4 justify-start w-full px-1">
      <span class="text-sm font-semibold self-center text-base-content/70">{{
        'search.activeFilters' | translate
      }}</span>
      @for (badge of activeFilters(); track $index) {
        <div class="badge badge-primary badge-outline">{{ badge }}</div>
      }
    </div>

    <!-- # LEGACY - Activate when implementing temporary search for user-based session storage use case-->
    <!-- @if (isTemporaryMode()) {
      <p class="text-sm text-base-content/50 mt-6 text-center">
        <strong class="text-warning">{{ 'landing.temporaryModeNote' | translate }}</strong>
        {{ 'landing.temporaryModeWarning' | translate }}
      </p>
    } @else if (activeProject()) {
      <p class="text-sm text-base-content/50 mt-6 text-center">
        {{ 'landing.searchingInProject' | translate: { name: activeProject()!.name } }}
      </p>
    } @else if (hasProjects()) {
      <p class="text-sm text-base-content/50 mt-6 text-center">
        {{ 'landing.selectProjectHint' | translate }}
      </p>
    } @else {
      <p class="text-sm text-base-content/50 mt-6 text-center">
        {{ 'landing.createProjectHint' | translate }}
      </p>
    } -->
  </div>
</div>
