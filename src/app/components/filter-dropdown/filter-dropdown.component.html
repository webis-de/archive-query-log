<div>
  <aql-dropdown position="bottom end" [contentWidth]="'350px'">
    <div trigger class="relative">
      <aql-button btnType="primary" iconStyle="circle" size="md" iconBefore="">
        <i
          class="bi text-3xl transition-transform duration-300 ease-in-out"
          [ngClass]="isOpen() ? 'bi-x rotate-180' : 'bi-filter rotate-0'"
        ></i>
      </aql-button>
    </div>
    <ng-container content>
      <div
        tabindex="0"
        class="text-left"
        (click)="$event.stopPropagation()"
        (mousedown)="$event.stopPropagation()"
        (keydown)="$event.stopPropagation()"
      >
        <div class="p-2 border-b border-base-300">
          <div class="flex gap-4">
            <div class="flex-1">
              <span class="block text-sm font-bold text-base-content/60 mb-1">From</span>
              <aql-input-field
                type="date"
                [showIcon]="false"
                size="sm"
                [value]="dateFrom()"
                [max]="maxDateFrom()"
                (change)="updateDateFrom($any($event.target).value)"
                class="w-full"
              ></aql-input-field>
            </div>
            <div class="flex-1">
              <span class="block text-sm font-bold text-base-content/60 mb-1">To</span>
              <aql-input-field
                type="date"
                [showIcon]="false"
                size="sm"
                [value]="dateTo()"
                [min]="minDateTo()"
                [max]="maxDateTo()"
                (change)="updateDateTo($any($event.target).value)"
                class="w-full"
              ></aql-input-field>
            </div>
          </div>
        </div>

        <div class="p-2 border-b border-base-300">
          <span class="block text-sm font-bold text-base-content/60 mb-3">Website Status</span>
          <div class="flex flex-row items-center gap-4">
            <aql-radio-button
              name="statusGroup"
              label="Any"
              value="any"
              size="sm"
              [checked]="status() === 'any'"
              (click)="updateStatus('any')"
            ></aql-radio-button>
            <aql-radio-button
              name="statusGroup"
              label="Active"
              value="active"
              size="sm"
              [checked]="status() === 'active'"
              (click)="updateStatus('active')"
            ></aql-radio-button>
            <aql-radio-button
              name="statusGroup"
              label="Inactive"
              value="inactive"
              size="sm"
              [checked]="status() === 'inactive'"
              (click)="updateStatus('inactive')"
            ></aql-radio-button>
          </div>
        </div>

        <div class="p-2 pb-6">
          <span class="block text-sm font-bold text-base-content/60 mb-3">Search Providers</span>
          <div class="flex flex-col gap-2">
            @for (provider of providers(); track provider.id) {
              <div>
                <aql-checkbox
                  [label]="provider.label"
                  size="sm"
                  [checked]="provider.checked"
                  (checkboxChange)="updateProviderCheckedByLabel(provider.label, $event)"
                ></aql-checkbox>
              </div>
            }
          </div>
        </div>

        <div class="flex border-t border-base-300 p-2 justify-between gap-3">
          <aql-button btnType="default" size="sm" (click)="reset()"> Reset </aql-button>
          <aql-button btnType="primary" size="sm" (click)="apply($event)"> Apply </aql-button>
        </div>
      </div>
    </ng-container>
  </aql-dropdown>
</div>
