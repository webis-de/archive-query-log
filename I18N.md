# Internationalization (i18n) Implementation

This project uses **ngx-translate** for runtime internationalization with JSON-based translation files.

## âœ¨ Features

- âœ… Runtime language switching (no rebuild required)
- âœ… JSON-based translation files for easy management
- âœ… Persistent language selection (localStorage)
- âœ… Browser language detection
- âœ… Language selector UI component
- âœ… Support for English and German (easily extensible)

## ğŸ“ Structure

```
src/
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ i18n/
â”‚       â”œâ”€â”€ en.json     # English translations
â”‚       â””â”€â”€ de.json     # German translations
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ language.service.ts    # Language management service
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ language-selector/     # Language selector component
```

## ğŸš€ Usage

### Quick Example

Here's a complete example component using translations:

**Component TypeScript:**
```typescript
import { Component } from '@angular/core';
import { TranslateModule } from '@ngx-translate/core';
import { LanguageSelectorComponent } from './components/language-selector/language-selector.component';

@Component({
  selector: 'app-example',
  standalone: true,
  imports: [TranslateModule, LanguageSelectorComponent],
  template: `
    <div>
      <h1>{{ 'app.title' | translate }}</h1>
      <button>{{ 'common.save' | translate }}</button>
      <app-language-selector></app-language-selector>
    </div>
  `
})
export class ExampleComponent {}
```

### In Templates

Use the `translate` pipe to translate text:

```html
<!-- Simple translation -->
<h1>{{ 'app.title' | translate }}</h1>

<!-- Translation with parameters -->
<p>{{ 'search.resultsFound' | translate: {count: totalCount} }}</p>

<!-- Translation in attributes -->
<input [placeholder]="'search.placeholder' | translate">
<button [attr.aria-label]="'sidebar.expandSidebar' | translate">
```

### In TypeScript

Inject the `TranslateService` to use translations programmatically:

```typescript
import { TranslateService } from '@ngx-translate/core';

constructor(private translate: TranslateService) {}

getTranslation() {
  this.translate.get('common.loading').subscribe((text: string) => {
    console.log(text);
  });
}
```

### Language Service

The `LanguageService` manages language switching and persistence:

```typescript
import { LanguageService } from './services/language.service';

constructor(private languageService: LanguageService) {}

// Get current language
const currentLang = this.languageService.currentLanguage();

// Change language
this.languageService.setLanguage('de');

// Toggle between languages
this.languageService.toggleLanguage();
```

## ğŸŒ Adding New Languages

1. Create a new JSON file in `src/assets/i18n/` (e.g., `fr.json`)
2. Copy the structure from `en.json` and translate all values
3. Add the language to `LanguageService.availableLanguages`:

```typescript
readonly availableLanguages: Language[] = [
  { code: 'en', name: 'English', flag: 'ğŸ‡¬ğŸ‡§' },
  { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' },
  { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' }  // Add new language
];
```

## ğŸ“ Translation File Structure

Translation files use nested JSON structure for organization:

```json
{
  "app": {
    "title": "AQL Search"
  },
  "common": {
    "search": "Search",
    "loading": "Loading...",
    "save": "Save"
  },
  "sidebar": {
    "newProject": "New project",
    "temporarySearch": "Temporary search"
  }
}
```

### Translation Keys with Parameters

Use `{{variable}}` syntax for dynamic values:

```json
{
  "search": {
    "resultsFound": "Found {{count}} results"
  }
}
```

In template:
```html
{{ 'search.resultsFound' | translate: {count: 42} }}
```

## ğŸ¨ Language Selector Component

The language selector dropdown is available as `<app-language-selector>`:

```html
<app-language-selector></app-language-selector>
```

It displays:
- Current language with flag emoji
- Dropdown with all available languages
- Active language highlighted
- Persists selection to localStorage

## ğŸ”§ Configuration

Language configuration is in `app.config.ts`:

```typescript
import { provideTranslateHttpLoader } from '@ngx-translate/http-loader';

export const appConfig: ApplicationConfig = {
  providers: [
    // ... other providers
    importProvidersFrom(
      TranslateModule.forRoot({
        defaultLanguage: 'en'
      })
    ),
    provideTranslateHttpLoader({
      prefix: './assets/i18n/',
      suffix: '.json'
    })
  ],
};
```

### Configuration Options

The `provideTranslateHttpLoader` function accepts a configuration object:

- `prefix` - Path prefix for translation files (default: `'/assets/i18n/'`)
- `suffix` - File extension suffix (default: `'.json'`)
- `enforceLoading` - Forces cache refresh (default: `false`)
- `useHttpBackend` - Use HttpBackend instead of HttpClient (default: `false`)

## ğŸ’¾ Language Persistence

- Selected language is saved to `localStorage` (key: `app_language`)
- On app initialization, language is restored from localStorage
- Falls back to browser language if no saved preference
- Defaults to English if browser language is not supported

## ğŸ§ª Testing

Import `TranslateModule` in test files:

```typescript
import { TranslateModule } from '@ngx-translate/core';

TestBed.configureTestingModule({
  imports: [
    YourComponent,
    TranslateModule.forRoot()
  ]
});
```

## ğŸ“š Available Translation Keys

### App
- `app.title` - Application title

### Common
- `common.search`, `common.loading`, `common.cancel`, `common.save`, `common.delete`, `common.edit`, `common.close`

### Sidebar
- `sidebar.expandSidebar`, `sidebar.collapseSidebar`, `sidebar.newProject`, `sidebar.temporarySearch`, `sidebar.projects`, `sidebar.searchHistory`

### Landing Page
- `landing.welcomeMessage`, `landing.searchPlaceholder`, `landing.searchButton`, `landing.temporaryModeNote`, `landing.temporaryModeWarning`

### Search
- `search.placeholder`, `search.label`, `search.resultsFound`, `search.noResults`, `search.score`

### Project
- `project.name`, `project.description`, `project.createNew`, `project.edit`, `project.delete`

### Language
- `language.select`, `language.english`, `language.german`

## ğŸ“¦ Dependencies

- `@ngx-translate/core` - Core translation functionality
- `@ngx-translate/http-loader` - Load translations from JSON files

## ğŸ”— Resources

- [ngx-translate Documentation](https://github.com/ngx-translate/core)
- [Angular i18n Guide](https://angular.io/guide/i18n)

## ğŸ¯ Implementation Status

The following components have been updated with i18n support:

- âœ… Landing page (`landing.component`)
- âœ… Search view (`search-view.component`)
- âœ… Sidebar (`app-sidebar.component`)
- âœ… Language selector component (new)
- âœ… App configuration with TranslateModule

### To Add Translations to Other Components

1. Import `TranslateModule` in the component:
   ```typescript
   import { TranslateModule } from '@ngx-translate/core';
   
   @Component({
     imports: [TranslateModule, ...otherImports]
   })
   ```

2. Add translation keys to `en.json` and `de.json`

3. Use the `translate` pipe in templates:
   ```html
   {{ 'your.translation.key' | translate }}
   ```

