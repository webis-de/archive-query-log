# Ingress - Expose the application externally
# This routes external traffic to the frontend, which proxies /api to backend
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: aql-ingress
  namespace: user-ajjxp
  labels:
    app: aql
  annotations:
    # Adjust these annotations based on the cluster's ingress controller
    # Common for nginx-ingress:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/proxy-body-size: "10m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "60"
    # Enable CORS if needed
    # nginx.ingress.kubernetes.io/enable-cors: "true"
spec:
  rules:
    # TODO: Replace with your actual domain/subdomain assigned by the cluster
    # Ask your product owner about the available domain
    - host: aql.user-ajjxp.k8s.webis.de
      http:
        paths:
          # Route all traffic to the frontend
          - path: /
            pathType: Prefix
            backend:
              service:
                name: aql-frontend
                port:
                  number: 80
  # TLS configuration (if the cluster provides certificates)
  # tls:
  #   - hosts:
  #       - aql.user-ajjxp.k8s.webis.de
  #     secretName: aql-tls-secret
