<!doctype html>
<head>
    <title>Archive Query Log</title>
    <script type="text/javascript" src="https://livejs.com/live.js"></script>
</head>
<body>
<h1>Archive Query Log</h1>
<section>
    <h2>Stats</h2>
    <table>
        <thead>
        <tr>
            <th>Type</th>
            <th>Description</th>
            <th>Count</th>
        </tr>
        </thead>
        <tbody>
        {% for count in count_stages %}
            <tr>
                <td>{{ count.name }}</td>
                <td>{% if count.description %}{{ count.description }}{% else %}—{% endif %}</td>
                <td style="text-align: right">{{ count.total }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</section>
<section>
    <h2>Progress</h2>
    <table>
        <thead>
        <tr>
            <th>Stage</th>
            <th>Description</th>
            <th>Processed</th>
            <th>Unprocessed</th>
            <th>Progress</th>
        </tr>
        </thead>
        <tbody>
        {% for progress in progress_stages %}
            <tr>
                <td>{{ progress.name }}</td>
                <td>
                    {% if progress.description %}{{ progress.description }}{% else %}—{% endif %}</td>
                <td>{{ progress.current }}</td>
                <td>{{ progress.total - progress.current }}</td>
                <td>
                    <progress max="{{ progress.total }}" value="{{ progress.current }}">
                        {{ progress.current / progress.total * 100 }}%
                    </progress>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</section>
</body>
